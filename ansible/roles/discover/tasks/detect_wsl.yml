---
# Detect if running in WSL environment

- name: Check if running in WSL
  ansible.builtin.shell: grep -qiE "(microsoft|wsl)" /proc/version
  register: wsl_check
  ignore_errors: true
  changed_when: false

- name: Set IS_WSL fact
  ansible.builtin.set_fact:
    IS_WSL: "{{ wsl_check.rc == 0 }}"

- name: Display WSL detection result
  ansible.builtin.debug:
    msg: "Running in WSL: {{ IS_WSL }}"
    verbosity: 1
